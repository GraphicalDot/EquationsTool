
<!-- This is to add add+ button only when a parent module has already been selected -->
<div class="row">
        <div class="col s4">
    <a class="btn-floating btn-large waves-effect waves-light red"  *ngIf="selectedParent" (click)="addModuleButton()"><i class="material-icons">add</i></a>
    </div>

                <div class="col s4">
    <form materialize class="col s12">
        <div class="input-field col s12">
          <input id="textarea1" class="materialize-textarea" (ngModelChange)="search_text_changed($event)" [(ngModel)]="search_text" name="search_text" >
      </div>
    </form>
            
    </div>  

        <div class="col s4">
                     <button class="btn waves-effect waves-light blue" (click)="unfreezeOntology()" > Unfreeze Ontology</button>
    </div>


</div>

<div class="row">

<div *ngIf="openEdit">
    <div class="col s12">
        <!--  <div [froalaEditor]="options"  [(froalaModel)]="editorContent">Add question Here</div>
         -->    <app-questioneditor [option]=false></app-questioneditor>
        <form materialize class="col s12" [formGroup]="myForm" (ngSubmit)="editModule(module.value)">
          <div class="row">
              <div class="input-field col s4">
                  <input id="icon_prefix" type="text" class="validate" formControlName="module_name"  [(ngModel)]="module.module_name" name="module_name">
              </div>
              <div class="input-field col s4">
                  <input id="icon_telephone" type="tel" class="validate"  formControlName="description" [(ngModel)]="module.description" name="description">
              </div>
          </div>
        <button class="btn waves-effect waves-light" (click)="addOption()" >Add Option</button>
        <button class="btn waves-effect waves-light" type="submit" name="action">Submit<i class="material-icons right">send</i></button>
         
         
          <div class="row" formArrayName="options" *ngFor="let item of myForm.get('options').controls; let i = index;">

            <div [formGroupName]="i">
                  <div class="input-field col s2">
                        <input formControlName="option_name" disabled value='Option Number {{i +1 }}'>
                  </div>

                  <div class="input-field col s2">
                       <button class="btn waves-effect waves-light nano red" type="button" (click)="delInput(i)">-</button>
                  </div>
                  <div class="input-field col s6">
                       <app-questioneditor [option]="i+1" ></app-questioneditor>
                  </div>
                </div>

        </div>

         
         
        </form>
    </div>
</div>




<div  *ngIf="openAdd">
<!--         <div [froalaEditor]="options"  [(froalaModel)]="editorContent">Hello, Froala!</div>
 -->
       <form materialize [formGroup]="myForm" (ngSubmit)="addQuestion(myForm.value)"  class="ui form">
          <button class="btn waves-effect waves-light" type="submit" name="action">Submit
              <i class="material-icons right">send</i>
          </button>
          <div class="row">
              <div class="input-field col s5">
                  <input id="icon_prefix" type="text" class="validate"  formControlName="module_name" required ng-pristine>
                  <label>Name</label>
              </div>
              <div class="input-field col s5">
                  <input id="icon_telephone" type="tel" class="validate"  formControlName="description" required>
                  <label>Description</label>
              </div>
              
        </div>
        </form>

        <div class="row">
            <div class="col s5">
                <angular2-multiselect [data]="QuestionTypeData" [(ngModel)]="question_type" 
                            [settings]="QuestionTypeSettings"></angular2-multiselect>

            </div>
            <div class="col s5">

              </div>




        </div>

<!--           <div class="row" formArrayName="options" *ngFor="let item of myForm.get('options').controls; let i = index;">

            <div [formGroupName]="i">
                  <input formControlName="option_name" placeholder="Option Name">
                  <input formControlName="option_order" placeholder="Description">
                  <input formControlName="option_text" placeholder="Text">
                  
                   <input type="file" formControlName="option_image"><label>Image</label>
                   <button type="button" (click)="delInput(i)">Delete</button>
            </div>

        </div>
 -->


</div>
   


        <table materialize *ngIf="(questions$ | async)?.length>0">
        <thead>
          <tr>
              <th>Name</th>
              <th>Creator</th>
              <th>Created on</th>
              <th>Creation approval</th>
              <th>Question Text</th>
              <th>Question Type</th>
              <th>Edit</th>
              <th>Delete</th>
          </tr>
        </thead>
                   
        <tbody *ngFor="let domain of questions$ | async | paginate: { itemsPerPage: 15, currentPage: currentPage$ | async,  totalItems: module_count$ |async}">
            <tr>
                    <td>{{domain.module_name}}</td>
                    <td>{{domain.username}}</td>
                    <td>{{domain.indian_time}}</td>
                    <td>
                        <input disable type="radio" [checked]="domain.creation_approval"/><label class="black-text flow-text"></label>
                    </td>
                    <td>{{ domain.question_text}}</td>
                    <td>{{ domain.question_type[0].module_name}}</td>
                    
                     <td><button class="btn waves-effect waves-light" (click) = "edit(domain)" >Edit</button></td>
                    <td><button class="btn waves-effect waves-light" (click) = "delete(domain)">Delete</button></td>
            </tr>

        </tbody>
        </table>
        <pagination-controls boundary-links="true" (pageChange)="pageNanoskillChanged($event)"></pagination-controls>

</div>