
<!-- This is to add add+ button only when a parent module has already been selected -->
<div class="row">
    <a class="btn-floating btn-large waves-effect waves-light pulse black"  *ngIf="selectedParent" (click)="addModuleButton()"><i class="material-icons">add</i></a>
</div>

<div class="row">
        <!--
        
  <nav>
    <div class="nav-wrapper">
      <div class="col s12">
        <a href="#!" class="breadcrumb">First</a>
        <a href="#!" class="breadcrumb">Second</a>
        <a href="#!" class="breadcrumb">Third</a>
        <a href="#!" class="breadcrumb">Fourth</a>
        <a href="#!" class="breadcrumb">Fifth</a>
        <a href="#!" class="breadcrumb">Sixth</a>
        <a href="#!" class="breadcrumb">Seventh</a>
        </div>
    </div>
  </nav>
        -->
</div>

<div class="row">

<div *ngIf="openEdit">
    <div class="col s12">
       <form materialize class="col s12" #form="ngForm" (ngSubmit)="editModule(module.value)">
          <div class="row">
              <div class="input-field col s4">
                  <input id="icon_prefix" type="text" class="validate"  [(ngModel)]="module.module_name" name="module_name">
              </div>
              <div class="input-field col s4">
                  <input id="icon_telephone" type="tel" class="validate"  [(ngModel)]="module.description" name="description">
              </div>
          </div>
          <button class="btn waves-effect waves-light" type="submit" name="action">Submit
              <i class="material-icons right">send</i>
          </button>
        </form>
    </div>
</div>




<div *ngIf="openAdd">
    <div class="col s12">
       <form materialize class="col s12" #form="ngForm" (ngSubmit)="addModule(form.value)"  class="ui form">
          <div class="row">
              <div class="input-field col s4">
                  <input id="icon_prefix" type="text" class="validate"  [(ngModel)]="module_name" name="module_name" required ng-pristine>
                  <label>Name</label>
              </div>
              <div class="input-field col s4">
                  <input id="icon_telephone" type="tel" class="validate"  [(ngModel)]="description" name="description" required>
                  <label>Description</label>
              </div>
              <div class="input-field col s4">
                  <input id="icon_prefix" type="text" class="validate"  [(ngModel)]="user_type" name="user_type" required>
                  <label for="user_type">User Type</label>
              </div>
          </div>

          <div class="row">
                 <div class="input-field col s6">
                  <select [(ngModel)]="bloom_taxonomy" name="bloom_taxonomy" (ngModelChange)="change($event)" [materializeSelectOptions]="selectOptions" multiple  materialize="material_select">
                        <option value="" disabled selected>Blooms Taxonomy</option>
                        <option *ngFor="let bloom of blooms" [value]="bloom">{{bloom}}</option>
                      
                  </select>

              </div>

              <div class="input-field col s6">
                  <select [(ngModel)]="connections" name="connections"  multiple  materialize="material_select">
                        <option value="" disabled selected>Connections with other subconcepts</option>
                        <option *ngFor="let module of subconcepts | async" [value]="module.mdoule_id">{{module.module_name}}</option>
                  </select>

              </div>
                
          </div>

          <div class="row">
              <div class="input-field col s6">
                  <select [(ngModel)]="required_concepts" name="required_concepts" (ngModelChange)="change($event)" [materializeSelectOptions]="selectOptions" multiple  materialize="material_select">
                        <option value="" disabled selected>Required Concepts</option>
                      <option *ngFor="let module of concepts | async" [value]="module.module_id">{{module.module_name}}</option>
                  </select>

              </div>
              <div class="input-field col s6">
                  <input type="text" name="module_id"  disabled [attr.value]="(selectedModule| async)?.module_name">
                  <label for="disabled">SubConcept Name</label>
              </div>
              
          </div>


          <button class="btn waves-effect waves-light" type="submit" name="action">Submit
              <i class="material-icons right">send</i>
          </button>
        </form>
    </div>
</div>
   


        <table>
              <div class="row">
    <form materialize class="col s12">
      <div class="row">
        <div class="input-field col s12">
          <textarea id="textarea1" class="materialize-textarea" (ngModelChange)="search_text_changed($event)" [(ngModel)]="search_text" name="search_text" ></textarea>
          <label for="textarea1">Search Subconcepts</label>
        </div>
      </div>
    </form>
  </div>
        <thead>
          <tr>
              <th>Name</th>
              <th>Creator</th>
              <th>Created on</th>
              <th>Creation approval</th>
              <th>Children</th>
              <th>Status</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Add Concepts</th>
          </tr>
        </thead>

            <tbody *ngFor="let domain of subconcepts$ | async | paginate: { id: 'subconcept', itemsPerPage: 15, currentPage: currentSubConceptPage,  totalItems: subconcept_module_count$ |async}">

            <tr>
                    <td>{{domain.module_name}}</td>
                    <td>{{domain.username}}</td>
                    <td>{{domain.indian_time}}</td>
                    <td>
                        <input disable type="radio" [checked]="domain.creation_approval"/><label class="black-text flow-text"></label>
                    </td>
                    <td>{{ domain.children}}</td>
                    <td>{{domain.status}}</td>
                    
                     <td><button class="btn waves-effect waves-light" (click) = "edit(domain)" >Edit</button></td>
                    <td><button class="btn waves-effect waves-light red" (click) = "delete(domain)">Delete</button></td>
                    <td><button class="btn waves-effect waves-light blue" (click)="selectSubconcept(domain)">Add Nanoskill</button></td>
            </tr>

        </tbody>
                            <pagination-controls id='subconcept' (pageChange)="pageSubconceptChanged($event)"></pagination-controls>

        </table>

</div>